<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>🌌 Air Conductor - Musical Universe 2025</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Revolutionary gesture-based music creation platform with immersive 3D universe" />
  
  <!-- 🎨 Revolutionary Design System -->
  <link rel="stylesheet" href="/src/universe-styles.css">
  
  <!-- 🚀 Performance Optimizations -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  
  <!-- 🌟 Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🎵</text></svg>">
</head>

<body>
  <!-- 🌌 Cosmic Loader -->
  <div class="cosmic-loader" id="cosmicLoader">
    <div class="loader-orb"></div>
  </div>

  <!-- 🎵 Main Universe Container -->
  <div id="app">
    
    <!-- 🌟 Full-Screen Universe Canvas -->
    <canvas id="universe-canvas"></canvas>
    
    <!-- 🎭 Video Feed - Floating Cosmic Orb -->
    <video id="video" autoplay playsinline muted></video>
    
    <!-- 🎼 Revolutionary HUD System -->
    
    <!-- 🌟 Floating Header -->
    <div class="cosmic-hud header-hud">
      <h1 class="cosmic-title">
        🌌 Air Conductor
      </h1>
      <p style="opacity: 0.8; margin-top: 8px; font-size: 0.9rem;">
        Musical Universe 2025
      </p>
    </div>
    
    <!-- 🎯 Status Indicator -->
    <div class="cosmic-hud status-hud">
      <div class="status-dot" id="statusDot"></div>
      <span id="statusText">Initializing Universe...</span>
    </div>
    
    <!-- 🎵 Floating Instrument Constellation -->
    <div class="instruments-constellation" id="instrumentsConstellation">
      <!-- Dynamically populated by JavaScript -->
    </div>
    
    <!-- 🌌 Dynamic Nebula Zones -->
    <div class="nebula-zone rhythm" id="rhythmNebula" 
         style="width: 300px; height: 300px; left: 15%; top: 25%;">
      <div class="nebula-label">
        <div style="font-size: 2rem; margin-bottom: 8px;">🥁</div>
        <div style="font-weight: 700; font-size: 1.1rem;">RHYTHM</div>
        <div style="opacity: 0.8; font-size: 0.9rem;">Left Hand Zone</div>
      </div>
    </div>
    
    <div class="nebula-zone melody" id="melodyNebula"
         style="width: 300px; height: 300px; right: 15%; top: 25%;">
      <div class="nebula-label">
        <div style="font-size: 2rem; margin-bottom: 8px;">🎵</div>
        <div style="font-weight: 700; font-size: 1.1rem;">MELODY</div>
        <div style="opacity: 0.8; font-size: 0.9rem;">Right Hand Zone</div>
      </div>
    </div>
    
    <!-- 🎛️ Revolutionary Settings Panel -->
    <div class="cosmic-hud settings-panel" id="settingsPanel">
      <button class="cosmic-button" id="styleButton">
        <span>🎨 Style</span>
      </button>
      <button class="cosmic-button" id="modeButton">
        <span>🌟 3D Mode</span>
      </button>
      <button class="cosmic-button" id="collaborateButton">
        <span>👥 Collaborate</span>
      </button>
      <button class="cosmic-button" id="recordButton">
        <span>🎬 Record</span>
      </button>
    </div>
    
    <!-- ✨ Particle Container -->
    <div id="particleContainer"></div>
    
    <!-- 🎵 Musical Notes Container -->
    <div id="musicalNotesContainer"></div>
    
    <!-- 🌟 Welcome Experience -->
    <div class="cosmic-welcome" id="cosmicWelcome" style="
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.9);
      backdrop-filter: blur(20px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 50;
      opacity: 1;
      transition: all 1s cubic-bezier(0.4, 0, 0.2, 1);
    ">
      <div style="
        background: linear-gradient(135deg, 
          rgba(78, 205, 196, 0.1) 0%,
          rgba(255, 107, 157, 0.1) 100%);
        backdrop-filter: blur(25px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 32px;
        padding: 40px;
        text-align: center;
        max-width: 600px;
        margin: 20px;
        animation: welcomeFloat 1s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      ">
        <div style="font-size: 4rem; margin-bottom: 20px;">🌌</div>
        <h2 style="
          font-size: 2.5rem;
          font-weight: 700;
          background: linear-gradient(135deg, #4ECDC4, #FF6B9D);
          background-clip: text;
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          margin-bottom: 20px;
        ">Welcome to the Musical Universe</h2>
        
        <p style="font-size: 1.2rem; opacity: 0.9; margin-bottom: 30px; line-height: 1.6;">
          Transform your <strong>gestures</strong> into <strong>cosmic music</strong>.<br>
          Experience the most advanced musical creation platform ever built.
        </p>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 30px 0;">
          <div style="padding: 20px; background: rgba(78, 205, 196, 0.1); border-radius: 16px; border: 1px solid rgba(78, 205, 196, 0.3);">
            <div style="font-size: 2rem; margin-bottom: 10px;">🖐️</div>
            <div style="font-weight: 600; margin-bottom: 8px;">Gesture Magic</div>
            <div style="font-size: 0.9rem; opacity: 0.8;">Every movement creates beautiful music</div>
          </div>
          
          <div style="padding: 20px; background: rgba(255, 107, 157, 0.1); border-radius: 16px; border: 1px solid rgba(255, 107, 157, 0.3);">
            <div style="font-size: 2rem; margin-bottom: 10px;">🤖</div>
            <div style="font-weight: 600; margin-bottom: 8px;">AI Collaboration</div>
            <div style="font-size: 0.9rem; opacity: 0.8;">Intelligent musical partner</div>
          </div>
          
          <div style="padding: 20px; background: rgba(69, 183, 209, 0.1); border-radius: 16px; border: 1px solid rgba(69, 183, 209, 0.3);">
            <div style="font-size: 2rem; margin-bottom: 10px;">🌌</div>
            <div style="font-weight: 600; margin-bottom: 8px;">3D Universe</div>
            <div style="font-size: 0.9rem; opacity: 0.8;">Immersive visual experience</div>
          </div>
        </div>
        
        <button onclick="startCosmicExperience()" style="
          background: linear-gradient(135deg, #4ECDC4, #FF6B9D);
          border: none;
          padding: 16px 40px;
          border-radius: 25px;
          color: white;
          font-size: 1.2rem;
          font-weight: 700;
          cursor: pointer;
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          box-shadow: 0 10px 30px rgba(78, 205, 196, 0.3);
          margin-top: 20px;
        " onmouseover="this.style.transform='translateY(-3px) scale(1.05)'; this.style.boxShadow='0 20px 40px rgba(78, 205, 196, 0.4)'" 
           onmouseout="this.style.transform='translateY(0) scale(1)'; this.style.boxShadow='0 10px 30px rgba(78, 205, 196, 0.3)'">
          🚀 Enter the Universe
        </button>
        
        <p style="font-size: 0.9rem; opacity: 0.7; margin-top: 20px;">
          💡 <strong>Tip:</strong> Allow camera access and position yourself 3-4 feet from the camera for best experience
        </p>
      </div>
    </div>

  </div>

  <!-- 🎵 Core Scripts -->
  <script>
    // 🌟 Welcome Experience
    function startCosmicExperience() {
      const welcome = document.getElementById('cosmicWelcome');
      welcome.style.opacity = '0';
      welcome.style.visibility = 'hidden';
      
      // Initialize the universe
      setTimeout(() => {
        initializeUniverse();
      }, 500);
    }
    
    // 🎬 Auto-hide welcome on interaction
    document.addEventListener('click', (e) => {
      const welcome = document.getElementById('cosmicWelcome');
      if (e.target === welcome) {
        startCosmicExperience();
      }
    });
    
    // 🌌 Universe Initialization
    function initializeUniverse() {
      console.log('🌌 Initializing Musical Universe 2025...');
      
      // Hide cosmic loader
      const loader = document.getElementById('cosmicLoader');
      if (loader) {
        loader.style.opacity = '0';
        setTimeout(() => loader.remove(), 1000);
      }
      
      // Update status
      const statusText = document.getElementById('statusText');
      const statusDot = document.getElementById('statusDot');
      
      if (statusText && statusDot) {
        statusText.textContent = '🌟 Universe Ready - Show your hands!';
        statusDot.style.background = '#4ECDC4';
      }
      
      // Create floating instruments
      createFloatingInstruments();
      
      // Start universe animations
      startUniverseAnimations();
    }
    
    // 🎵 Create Floating Instruments
    function createFloatingInstruments() {
      const constellation = document.getElementById('instrumentsConstellation');
      if (!constellation) return;
      
      const instruments = [
        { name: 'Piano', emoji: '🎹', x: '20%', y: '30%' },
        { name: 'Violin', emoji: '🎻', x: '75%', y: '25%' },
        { name: 'Drums', emoji: '🥁', x: '15%', y: '60%' },
        { name: 'Guitar', emoji: '🎸', x: '25%', y: '70%' },
        { name: 'Flute', emoji: '🪈', x: '70%', y: '50%' },
        { name: 'Trumpet', emoji: '🎺', x: '80%', y: '65%' },
        { name: 'Saxophone', emoji: '🎷', x: '50%', y: '80%' },
        { name: 'Harp', emoji: '🪕', x: '60%', y: '20%' }
      ];
      
      instruments.forEach((instrument, index) => {
        const orb = document.createElement('div');
        orb.className = 'instrument-orb';
        orb.style.left = instrument.x;
        orb.style.top = instrument.y;
        orb.style.animationDelay = `${index * 0.2}s`;
        
        orb.innerHTML = `
          <div class="instrument-emoji">${instrument.emoji}</div>
          <div class="instrument-name">${instrument.name}</div>
        `;
        
        // Add hover sound preview
        orb.addEventListener('mouseenter', () => {
          orb.style.transform = 'scale(1.2) translateY(-10px)';
          createParticleExplosion(orb);
        });
        
        orb.addEventListener('mouseleave', () => {
          orb.style.transform = 'scale(1) translateY(0)';
        });
        
        constellation.appendChild(orb);
      });
    }
    
    // ✨ Create Particle Explosion
    function createParticleExplosion(element) {
      const rect = element.getBoundingClientRect();
      const centerX = rect.left + rect.width / 2;
      const centerY = rect.top + rect.height / 2;
      
      for (let i = 0; i < 12; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = centerX + 'px';
        particle.style.top = centerY + 'px';
        particle.style.width = '6px';
        particle.style.height = '6px';
        particle.style.background = '#4ECDC4';
        particle.style.borderRadius = '50%';
        particle.style.boxShadow = '0 0 20px currentColor';
        
        const angle = (i / 12) * Math.PI * 2;
        const distance = Math.random() * 100 + 50;
        particle.style.setProperty('--end-x', Math.cos(angle) * distance + 'px');
        particle.style.setProperty('--end-y', Math.sin(angle) * distance + 'px');
        
        document.body.appendChild(particle);
        
        setTimeout(() => particle.remove(), 3000);
      }
    }
    
    // 🌌 Start Universe Animations
    function startUniverseAnimations() {
      // Floating nebula zones
      const rhythmNebula = document.getElementById('rhythmNebula');
      const melodyNebula = document.getElementById('melodyNebula');
      
      // Add interactive glow effects
      [rhythmNebula, melodyNebula].forEach(nebula => {
        if (!nebula) return;
        
        nebula.addEventListener('mouseenter', () => {
          nebula.classList.add('active');
        });
        
        nebula.addEventListener('mouseleave', () => {
          nebula.classList.remove('active');
        });
      });
      
      // Cosmic background animation
      startCosmicBackground();
    }
    
    // 🌟 Cosmic Background Animation
    function startCosmicBackground() {
      let time = 0;
      
      function animate() {
        time += 0.01;
        
        // Dynamic gradient rotation
        const app = document.getElementById('app');
        if (app) {
          const hue1 = (time * 30) % 360;
          const hue2 = (time * 20 + 120) % 360;
          const hue3 = (time * 15 + 240) % 360;
          
          app.style.background = `
            radial-gradient(circle at ${30 + Math.sin(time) * 20}% ${40 + Math.cos(time) * 20}%, 
              hsla(${hue1}, 40%, 15%, 0.9) 0%,
              hsla(${hue2}, 35%, 12%, 0.7) 40%,
              hsla(${hue3}, 30%, 8%, 0.5) 80%,
              hsla(220, 25%, 5%, 0.3) 100%)
          `;
        }
        
        requestAnimationFrame(animate);
      }
      
      animate();
    }
    
    // 🎨 CSS Animation Keyframes
    const style = document.createElement('style');
    style.textContent = `
      @keyframes welcomeFloat {
        0% {
          opacity: 0;
          transform: translateY(50px) scale(0.8);
        }
        100% {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
    `;
    document.head.appendChild(style);
  </script>
  
  <!-- 🚀 Main Application -->
  <script type="module" src="/src/universe-main.ts"></script>
</body>
</html>